{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ashwin Halford\\\\Downloads\\\\shiftmanager-v6.2\\\\shiftmanager\\\\frontend\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.baseURL = 'http://localhost:5000';\naxios.defaults.withCredentials = true;\nconst AuthContext = /*#__PURE__*/createContext(null);\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function AuthProvider({\n  children\n}) {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [permissions, setPermissions] = useState(null);\n  const [theme, setTheme] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    axios.get('/api/auth/me').then(r => {\n      setUser(r.data.user);\n      setPermissions(r.data.permissions);\n      setTheme(r.data.theme);\n      if (r.data.theme) applyTheme(r.data.theme);\n    }).catch(() => {}).finally(() => setLoading(false));\n  }, []);\n  const applyTheme = t => {\n    if (!t) return;\n    const root = document.documentElement;\n    root.style.setProperty('--red', t.primary_color || '#C0392B');\n    root.style.setProperty('--sidebar-bg', t.sidebar_bg || '#111827');\n    root.style.setProperty('--sidebar-active', t.sidebar_active || '#C0392B');\n    root.style.setProperty('--app-bg', t.app_bg || '#F1F5F9');\n    root.style.setProperty('--card-bg', t.card_bg || '#FFFFFF');\n    root.style.setProperty('--heading-color', t.heading_color || '#111827');\n    root.style.setProperty('--body-color', t.body_color || '#334155');\n    root.style.setProperty('--online-color', t.online_color || '#22C55E');\n    root.style.setProperty('--offline-color', t.offline_color || '#94A3B8');\n    root.style.setProperty('--draft-color', t.draft_color || '#FCD34D');\n    root.style.setProperty('--published-color', t.published_color || '#22C55E');\n    document.body.style.background = t.app_bg || '#F1F5F9';\n  };\n  const login = (userData, perms, themeData) => {\n    setUser(userData);\n    setPermissions(perms);\n    setTheme(themeData);\n    if (themeData) applyTheme(themeData);\n  };\n  const logout = async () => {\n    try {\n      await axios.post('/api/auth/logout');\n    } catch (e) {}\n    setUser(null);\n    setPermissions(null);\n  };\n  const updateTheme = newTheme => {\n    setTheme(newTheme);\n    applyTheme(newTheme);\n  };\n  const updateUser = userData => setUser(userData);\n  const can = perm => {\n    if (!user) return false;\n    if (user.user_type === 'account_admin') return true;\n    return !!(permissions !== null && permissions !== void 0 && permissions[perm]);\n  };\n  const isAdmin = (user === null || user === void 0 ? void 0 : user.user_type) === 'account_admin';\n  const isManager = (user === null || user === void 0 ? void 0 : user.user_type) === 'manager' || isAdmin;\n  const isLeader = (user === null || user === void 0 ? void 0 : user.user_type) === 'team_leader' || isManager;\n  const needsOnboarding = user && user.user_type === 'agent' && !user.onboarded;\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      permissions,\n      theme,\n      loading,\n      login,\n      logout,\n      can,\n      isAdmin,\n      isManager,\n      isLeader,\n      needsOnboarding,\n      updateTheme,\n      updateUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s2(AuthProvider, \"FPdfyzazXKVajKde8xFY6rvs1OE=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","jsxDEV","_jsxDEV","defaults","baseURL","withCredentials","AuthContext","useAuth","_s","AuthProvider","children","_s2","user","setUser","permissions","setPermissions","theme","setTheme","loading","setLoading","get","then","r","data","applyTheme","catch","finally","t","root","document","documentElement","style","setProperty","primary_color","sidebar_bg","sidebar_active","app_bg","card_bg","heading_color","body_color","online_color","offline_color","draft_color","published_color","body","background","login","userData","perms","themeData","logout","post","e","updateTheme","newTheme","updateUser","can","perm","user_type","isAdmin","isManager","isLeader","needsOnboarding","onboarded","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Ashwin Halford/Downloads/shiftmanager-v6.2/shiftmanager/frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'http://localhost:5000';\naxios.defaults.withCredentials = true;\n\nconst AuthContext = createContext(null);\nexport const useAuth = () => useContext(AuthContext);\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(null);\n  const [permissions, setPermissions] = useState(null);\n  const [theme, setTheme] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    axios.get('/api/auth/me').then(r => {\n      setUser(r.data.user);\n      setPermissions(r.data.permissions);\n      setTheme(r.data.theme);\n      if (r.data.theme) applyTheme(r.data.theme);\n    }).catch(() => {}).finally(() => setLoading(false));\n  }, []);\n\n  const applyTheme = (t) => {\n    if (!t) return;\n    const root = document.documentElement;\n    root.style.setProperty('--red', t.primary_color || '#C0392B');\n    root.style.setProperty('--sidebar-bg', t.sidebar_bg || '#111827');\n    root.style.setProperty('--sidebar-active', t.sidebar_active || '#C0392B');\n    root.style.setProperty('--app-bg', t.app_bg || '#F1F5F9');\n    root.style.setProperty('--card-bg', t.card_bg || '#FFFFFF');\n    root.style.setProperty('--heading-color', t.heading_color || '#111827');\n    root.style.setProperty('--body-color', t.body_color || '#334155');\n    root.style.setProperty('--online-color', t.online_color || '#22C55E');\n    root.style.setProperty('--offline-color', t.offline_color || '#94A3B8');\n    root.style.setProperty('--draft-color', t.draft_color || '#FCD34D');\n    root.style.setProperty('--published-color', t.published_color || '#22C55E');\n    document.body.style.background = t.app_bg || '#F1F5F9';\n  };\n\n  const login = (userData, perms, themeData) => {\n    setUser(userData); setPermissions(perms); setTheme(themeData);\n    if (themeData) applyTheme(themeData);\n  };\n\n  const logout = async () => {\n    try { await axios.post('/api/auth/logout'); } catch(e) {}\n    setUser(null); setPermissions(null);\n  };\n\n  const updateTheme = (newTheme) => { setTheme(newTheme); applyTheme(newTheme); };\n  const updateUser = (userData) => setUser(userData);\n\n  const can = (perm) => {\n    if (!user) return false;\n    if (user.user_type === 'account_admin') return true;\n    return !!permissions?.[perm];\n  };\n\n  const isAdmin = user?.user_type === 'account_admin';\n  const isManager = user?.user_type === 'manager' || isAdmin;\n  const isLeader = user?.user_type === 'team_leader' || isManager;\n  const needsOnboarding = user && user.user_type === 'agent' && !user.onboarded;\n\n  return (\n    <AuthContext.Provider value={{ user, permissions, theme, loading, login, logout, can, isAdmin, isManager, isLeader, needsOnboarding, updateTheme, updateUser }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}